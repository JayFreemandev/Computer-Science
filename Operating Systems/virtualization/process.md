# 프로세스

프로세스는 뭔가? 실행 중인 프로그램이라고 정의한다. 자바의 정석에서는 프로세스는 공장 스레드는 공장에서 일하는 일꾼으로 비유하곤 했다. 다르게 말하면 프로그램 자체는 생명이 없는 존재다. 

프로그램이란건 디스크 상에 존재하며 실행을 위한 명령어와 정적 데이터들의 모임인데. 이 명령어와 데이터 묶음을 읽고 실행하여 프로그램에 생명을 넣어주는것이 운영체제이다.

사용자는 하나 이상의 프로그램을 동시에 실행하고 싶어한다. 인텔리제이를 키면서 크롬도 키고 유튜브에서 음악도 듣고 풍선타워 디펜스도 하고싶어한다. 

컴퓨터는 동시에 여러개의 프로세스를 실행하는것처럼 보인다. 사용 가능한 CPU에 대해 신경쓰지 않고 동시에 여러 프로그램을 실행한다. 어떻게 가능할까?

 

**CPU가 여러 개 존재한다는 환상을 어떻게 줄수있을까?**

물리적인 하나의 CPU를 가지고 있지만 운영체제는 어떻게 무한개의 가까운 CPU 환상을 만들어 내는가? 전능하신 운영체제는 **CPU를 가상화**시킨다. 전에 이야기한 복숭아처럼 먹고 싶어 하는 사람들에게 가상 복숭화를 쥐어준다.

프로세스 하나를 실행하고 좀 있다 중단시키고 다른 프로세스를 다시 실행하는 작업을 반복하면서 하나의 CPU로 마치 여러 CPU가 존재하는듯한 환상을 일으킨다. 

TIME SHARING(시분할)이라고 불리는데 원하는 수 만큼의 프로세스를 동시에 실행하게한다 하지만 CPU를 공유하기에 각 프로세스의 성능은 좋지않다. 모든 현대 운영체제들이 채택하고있는 방법이다.


## 프로세스의 machine state

프로세스의 구성 요소를 이해하기 위해 머신 상태를 알아야한다. 프로그램이 실행되는 동안 머신 상태를 읽어올수있는데 가장 중요한 하드웨어 구성 요소는 무엇이냐? 

바로 메모리다. 명령어는 메모리에 저장되고 실행 프로그램의 데이터 또한 메모리에 저장된다. 

다음은 레지스터다. 많은 명령어들이 레지스터를 직접 읽어온다.  레지스터에도 종류가 있는데 PC라는 레지스터는 프로그램의 어느 명령어가 실행중인지 알려준다. JVM 메모리에도 PC가 존재함. 

스택 포인터와 프레임 포인터라는 레지스터도 있는데 함수의 변수와 리턴 주소를 저장할 스택을 관리할 때 사용하는 레지스터임.
