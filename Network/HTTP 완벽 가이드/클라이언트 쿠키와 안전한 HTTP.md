# 클라이언트 쿠키와 안전한 HTTP (ch11-14)

# Topic

1. ****클라이언트 식별과 쿠키****
2. 게이트웨이

## ****개인화****

요청을 보내는 사용자 식별 OR 연속적인 요청을 추적하기 위해 정보를 이용하기 시작한다. ex) 사용자 맞춤 정보, 저장된 사용자 정보, 세션 추적(온라인 쇼핑몰 장바구니) 같은 서비스를 제공하기 위해 HTTP는 사용자를 식별하는 기술이 필요했다.

****HTTP 헤더****

→ User-Agent 헤더 

사용자가 쓰고 있는 브라우저 이름과 버전 정보, 운영체제에 대한 정보까지 포함

```jsx
Mozilla/5.0 (Windows NT 6.1) AppleWebkit/537.36 (KTHML, like Gecko) Chrome/38.0.2125.111 Safari/537.36
```

→Referer 헤더

사용자가 현재 페이지로 유입하게 한 웹 페이지의 URL

****클라이언트 IP 주소****

→ 여러 사용자가 같은 컴퓨터 사용 or 프록시 사용하면 식별 불가능

****사용자 로그인****

→ 사용자에게 로그인 요구, 클라이언트는 Auth 헤더에 인증 토큰 전송 서버에서는 식별정보 받아가고 브라우저 요청마다 토큰을 헤더에 담아 전송하여 식별 유지

## ****쿠키****

`쿠키`는 사용자를 식별하고 세션을 유지하는 방식 중에서 가장 널리 사용하는 방식

**쿠키의 타입**

세션쿠기

- 사용자가 브라우저 닫으면 삭제됨
- Max-Age, Expire 없으면 세션 쿠키

지속쿠키

- 브라우저 닫아도 길게 유지
- 디스크 저장, 컴퓨터 재시작해도 남아있음
- 주기적 방문 사이트 정보, 로그인 유지를 위해 사용

브라우저는 보통 각 사이트에 두 개 혹은 세 개의 쿠키만을 보낸다 왜?

- 쿠키 모두 전달하면 성능 저하
- 특정 사이트에서 제공한 정보를 가져가면 개인정보 문제 야기

쿠키는 서버가 생성하여 클라이언트에 전달, 클라이언트는 쿠키를 유요한 사이트에만 전달하고 관리

****쿠키와 세션 추척****

쿠키는 웹 사이트에 수차례 트랜잭션을 만들어내는 사용자를 추적하는 데 사용

****쿠키와 캐싱****

캐시되지 말아야 할 문서가 있다면

→ 문서에 명시적으로 `Cache-Control: no-cache="Set-Cookie"`를 기술해서 명확히 표시

## ****HTTP 를 안전하게 만들기****

****HTTPS 사용****

****디지털 암호학****

- 암호 : 텍스트를 아무나 읽지 못하도록 인코딩하는 알고리즘
- 키 : 암호의동작을 변경하는 숫자로 된 매개변수
- 대칭키 암호 체계 : 인코딩과 디코딩에 같은 키를 사용하는 알고리즘
- 비대칭키 암호 체계 : 인코딩과 디코딩에 다른 키를 사용하는 알고리즘
- 공개키 암호법 : 비밀 메시지를 전달하는 수백만 대의 컴퓨터를 쉽게 만들 수 있는 시스템
- 디지털 서명 : 메시지가 위조 혹은 변조되지 않았음을 입증하는 체크섬
- 디지털 인증서 : 신뢰할 만한 조직에 의해 서명되고 검증된 신원 확인 정보

****대칭키 암호법(DES, Triple-DES, RC2, RC4)****

많은 디지털 암호 알고리즘은 `대칭키 암호` 라 불리는데, 인코딩을 할 때 사용하는 키와 디코딩을 할 때 사용하는 키가 같기 때문

****키 길이와 열거 공격****

무차별로 키 값을 대입해보는 공격을 `열거 공격`이라고 하는데 평범한 대칭키 암호에서 40비트 키는 쉽게 깨질수있고 128비트는 매우 튼튼하다.

****공유키 발급하기****

대칭키 암호의 단점은 발송자와 수신자가 서로 대화하려면 `둘 다 공유키를 가져야 한다는 것`입니다. N개의 노드가 있고, 각 노드가 상대 N-1 과 대화를 나누어야 한다면, 대략 총 N * N 개의 비밀키가 필요

****공개키 암호법****

`공개키 암호 방식`은 두 개의 비대칭 키를 사용합니다. 하나는 호스트의 메시지를 인코딩하고, 다른 하나는 메시지를 디코딩하기 위한 것으로 인코딩 키는 모두 공개 되어있지만 디코딩 키는 개인만 알고 있다.

서버에 공개 키만 있으면 되서 서버가 안전하게 메시지를 발송하는 것을 더 쉽게 해줍니다.
