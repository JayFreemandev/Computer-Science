# HTTP2.0등장 배경과 게이트웨이, 캐시 (ch7-10)

# Topic

1. 캐시 사용의 장점
2. 게이트웨이

## 캐시 사용시 장점

서버 응답은 캐시에 보관 + 캐시된 사본이 요청에 대한 응답으로 사용되서 트래픽 낭비 감소 

****대역폭 병목****

대부분 네트워크는 원격 서버보다 로컬 네트워크 클라이언트에 더 넓은 대역폭을 제공. 클라이언트가 빠른 LAN에 있는 캐시로부터 사본을 가져온다면, 캐싱은 성능을 대폭 개선

****갑작스런 요청 쇄도(Flash Crowds)****

갑작스런 요청 쇄도가 발생하면 불필요한 트래픽이 급증하여 네트워크와 웹 서버의 심각한 장애를 야기. `캐싱`은 이러한 갑작스런 요청 쇄도에 대처하기 위해 특히 중요

****거리로 인한 지연****

모든 네트워크 라우터는 인터넷 트래픽을 지역. 대역폭이 문제가 되지 않더라도 거리가 멀면 문제 → 근처에 캐시를 설치해서 문서가 전송되는 거리를 수천 킬로미터에서 수십 미터로 줄일 수 있다.

### ****적중과 부적중****

`캐시 적중`이란 캐시에 요청이 도착했을 때, 대응하는 사본에 있다면 사본을 이용해 요청이 처리되는 것을 말한다.

반대로 `캐시 부적중`은 대응하는 사본이 없어서 원 서버로 전달되는 것을 말합니다.

### ****캐시 제어****

****no-cache 와 no-store 응답 헤더****

→ `no-cache` 로 표시된 응답은 서버와 재검사를 통해 캐시에서 클라이언트로 제공될 수 있고, 로컬 캐시 저장소에 저장될 수 있다.

****Max-Age 응답 헤더****

→  `Cache-Control: max-age`헤더는 문서가 버서로부터 온 이후로 소요된 시간이고, 초로 나타냅니다. 서버는 maximum aging 을 0으로 설정함으로써, 캐시가 매 접근마다 문서를 캐시하거나 리프레시하지 않도록 요청

****아파치로 HTTP 헤더 제어하기****

- mod_headers
- mod_expires
- mod_cern_meta

## 게이트웨이

모든 리소스를 한 개의 애플리케이션으로만 처리할 수 없는 문제를 해결하기 위해 인터프리터 같이 리소스를 받기 위한 **경로를 안내하는 역할을 하는 게이트웨이를 고안**해냈다.

****터널****

웹 터널은 HTTP 프로토콜을 지원하지 않는 애플리케이션에 HTTP 애플리케이션을 사용해 접근하는 방법을 제공 • 웹 터널을 쓰는 일반적 이유는 HTTP 커넥션 안에 **HTTP가 아닌 트래픽을 얹기 위해서** 이다.

• 웹 터널은 원래 방화벽을 통해서 암호화된 SSL 트래픽을 전달하려고 개발되었다.

• 하지만 터널은 악의적인 트래픽이 사내로 유입되는 경로가 될 수도 있다.

### ****HTTP/2.0의 등장 배경****

HTTP/1.1의 메시지 포맷은 단순성과 접근성에 중점을 두고 최적화되었다. 그러나, 응답을 받아야만 다음 요청을 보낼 수 있기 때문에 심각한 회전 지연(latency) 을 피할 수 없었다.

HTTP/2.0은 **서버와 클라이언트 사이의 TCP 커넥션 위에서 동작**한다. 이때 TCP 커넥션을 초기화하는 것은 클라이언트다.HTTP/2.0 요청과 응답은 길이가 정의된(최대 16383 바이트) 한 개 이상의 프레임에 담긴다. 이때 **HTTP 헤더는 압축**되어 담긴다.

프레임에 담김 요청과 응답은 스트림으로 보내지고 하나의 커넥션 위에 여러 스트림이 동시에 만들어질수있어서 요청 응답 여러개를 동시에 처리가 가능하다

위에 스트림에 대한 우선순위나 흐름제어 기능도 제공하고 “서버 푸시” 기능을 도입해서 클라이언트에게 필요한 리소스라면 명시적으로 받지 않더라도 능동적으로 클라리언트에 담아 보낼수있다.

****알려진 보안 이슈****

****중개자 캡슐화 공격(Intermediary Encapsulation Attacks)****

2.0 메세지를 프록시가 1.1 메세지로 변환할때 메세지의 의미가 변질 가능성 있음

****긴 커넥션 유지로 인한 개인정보 누출 우려****

사용자가 요청을 보낼 때의 회전 지연을 줄이기 위해 클라이언트와 서버 사이의 커넥션을 오래 유지하도록 한다. 이것은 개인 정보 유출에 악용될 가능성이 있다.
