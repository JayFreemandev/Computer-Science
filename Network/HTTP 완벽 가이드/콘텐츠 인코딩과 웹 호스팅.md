# 콘텐츠 인코딩과 웹 호스팅(ch15, 18)

| 콘텐츠 인코딩 값 | 설명 |
| --- | --- |
| gzip | 엔터티에 GNU zip 인코딩이 적용되었음을 의미 |
| compress | 엔터티에 대해 유닉스 파일 압축 프로그램인 compress 가 실행되었음을 의미 |
| deflate | 엔터티가 zlib 포맷으로 압축되었음을 의미 |
| identity | 엔터티에 어떤 인코딩도 수행되지 않았음을 의미, Content-Encoding 헤더가 존재하지 않는다면 이 값인 것으로 간주 |

# Topic

1. 인코딩
2. 호스팅 웹 서버가 무엇을 제공하는지

## 인코딩

HTTP 애플리케이션은 때때로 콘텐츠를 보내기 전에 인코딩한다.

**인코딩 과정**

1. 웹 서버가 원본 Content-Type 과 Content-Length 헤더를 수반한 원본 응답 메시지를 생성
2. 콘텐츠 인코딩 서버가 인코딩된 메시지를 생성, 인코딩된 메시지는 Content-Type 은 같지만 Content-Length 는 다름. Content-Encoding 헤더를 인코딩된 메시지에 추가하여, 애플리케이션이 디코딩할 수 있도록 함
3. 수신측은 인코딩된 메시지를 받아서 디코딩하고 원본을 얻음

****콘텐츠 인코딩 유형****

| 콘텐츠 인코딩 값 | 설명 |
| --- | --- |
| gzip | 엔터티에 GNU zip 인코딩이 적용되었음을 의미 |
| compress | 엔터티에 대해 유닉스 파일 압축 프로그램인 compress 가 실행되었음을 의미 |
| deflate | 엔터티가 zlib 포맷으로 압축되었음을 의미 |
| identity | 엔터티에 어떤 인코딩도 수행되지 않았음을 의미, Content-Encoding 헤더가 존재하지 않는다면 이 값인 것으로 간주 |

`gzip`은 일반적으로 가장 효율적이고 가장 널리 쓰이는 압축 알고리즘입니다.

**보안**

SSL 과 같은 유명한 전송 계층 보안 방식이 있기 때문에 전송 인코딩 보안은 흔하지 않습니다.

## 호스팅

`웹 호스팅`이란 콘텐츠 리소스를 저장, 중개, 관리하는 일을 의미

콘텐츠를 저장해서 제공하고 관련 로그에 접근하거나 그것을 관리하는 데 서버가 필요한데, 필요한 하드웨어와 소프트웨어를 직접 관리하기 어렵다면 호스팅 서비스나 호스팅 업체가 필요할 것

****안정적인 웹 사이트 만들기****

웹 사이트에 장애가 생기는 몇 가지 상황

- 서버 다운
- 트래픽 폭증
- 네트워크 장애

****미러링 된 서버 팜****

`서버 팜`은 서로 대신할 수 있고 식별할 수 있게 설정된 웹 서버들의 집합

서버 팜의 서버에 있는 콘텐츠들은 한 곳에 문제가 생기면 다른 한 곳에서 대신 전달할 수 있게 미러링이 가능

- 원본 콘텐츠를 가지고 있는 `마스터 원 서버`, 미러링 된 서버는 `복제 원 서버`
- 미러링 된 서버는 다른 위치에 있는 콘텐츠와 정확히 같은 복제본 존재
- 네트워크 스위치를 사용하여 서버에 분산 요청을 전송, 서버에 호스팅 되고 있는 웹 사이트의 IP 주소는 스위치의 IP 주소가 됨
- 마스터 원 서버는 복제 원 서버에게 콘텐츠를 보낼 책임이 있고, 스위치는 서버에게 요청을 전송해야하는 책임이 있음

****콘텐츠 분산 네트워크****

`콘텐츠 분산 네트워크(CDN)`은 특정 콘텐츠의 분산을 목적으로 하는 단순 네트워크

네트워크의 노드는 서버, 대리 서버, 혹은 프락시 서버가 될 수 있습니다.

****CDN의 대리 캐시****

리버스 프락시라고도 불리고, 미러링 된 웹 서버처럼 콘텐츠에 대한 요청을 받음, 

원 서버와 대리 서버가 연결되며, 대리 서버는 특정 원 서버를 가리키는 요청을 받음

대리 서버와 미러링 된 서버의 차이점

- 대리 서버는 보통 수요에 따라서 동작
- 대리 서버는 원 서버의 전체 콘텐츠를 복사하지 않고, 클라이언트가 요청하는 콘텐츠만 저장
- 사용자가 요청하기도 전에 콘텐츠를 가져오는 '미리 가져오기' 기능을 가진 대리 서버도 존재
- **CDN이 대리 서버보다 캐시를 계층화하기 더 어려움**

****CDN의 프락시 캐시****

- 대리 서버를 이용한 프락시 캐시는 요청이 있을 때만 저장될 것이고, 원본 서버를 정확히 복제한다는 보장 없음
- 요청이 있을 때만 저장하는 프락시 캐시는 레이어2 혹은 레이어3 장비가 중간에서 웹 트래픽을 가로채 처리하기도 함(가로채기 설정은 물리적으로 캐시를 거치게 네트워크 설정을 할 수 있는지에 따라 달라짐)

****웹 사이트 빠르게 만들기****

서버 팜이나 분산 프락시 캐시나 대리 서버는 혼잡을 조절하고, 네트워크 트래픽을 분산 시킴

→ 분산시키면 전송 시간 단축

콘텐츠 인코딩

→ 클라이언트가 받은 압축을 해제할 수 있다는 가정하에, 콘텐츠를 압축
